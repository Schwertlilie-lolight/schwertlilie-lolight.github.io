HTMLElement.prototype.isVisible=function(){return"none"!==window.getComputedStyle(this).display},HTMLElement.prototype.width=function(){return parseFloat(window.getComputedStyle(this).width)},HTMLElement.prototype.height=function(){return parseFloat(window.getComputedStyle(this).height)},HTMLElement.prototype.outerHeight=function(e){var t=this.offsetHeight;if(!e)return t;var i=window.getComputedStyle(this);return t+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)},HTMLElement.prototype.css=function(e){for(var t in e)this.style[t]=e[t];return this},NexT.utils={wrapImageWithFancyBox:function(){document.querySelectorAll(".post-body img").forEach(e=>{var t=$(e),i=t.attr("title")||t.attr("alt"),a=t.parent("a");if(a.length<1){var n=t.attr("data-src")||t.attr("src");a=t.wrap(`<a class="fancybox fancybox.image" href="${n}" itemscope itemtype="http://schema.org/ImageObject" itemprop="url"></a>`).parent("a"),t.is(".post-gallery img")?(a.addClass("post-gallery-img"),a.attr("data-fancybox","gallery").attr("rel","gallery")):t.is(".group-picture img")?a.attr("data-fancybox","group").attr("rel","group"):a.attr("data-fancybox","default").attr("rel","default")}i&&(a.append(`<p class="image-caption">${i}</p>`),a.attr("title",i).attr("data-caption",i))}),$.fancybox.defaults.hash=!1,$(".fancybox").fancybox({loop:!0,helpers:{overlay:{locked:!1}}})},registerExtURL:function(){document.querySelectorAll(".exturl").forEach(e=>{e.addEventListener("click",e=>{var t=e.currentTarget.getAttribute("data-url"),i=decodeURIComponent(escape(window.atob(t)));return window.open(i,"_blank","noopener"),!1})})},registerCopyCode:function(){$(".highlight").not(".gist .highlight").each((e,t)=>{function i(e){"mac"===CONFIG.copycode.style?e.html('<i class="fa fa-clipboard"></i>'):e.text(CONFIG.translation.copy_button)}var a=$("<div>").addClass("copy-btn");a.on("click",e=>{var t=[...e.currentTarget.parentNode.querySelectorAll(".code .line")].map(e=>e.innerText).join("\n"),i=document.createElement("textarea"),a=window.scrollY;i.style.top=a+"px",i.style.position="absolute",i.style.opacity="0",i.readOnly=!0,i.value=t,document.body.appendChild(i);const n=document.getSelection(),r=n.rangeCount>0&&n.getRangeAt(0);i.select(),i.setSelectionRange(0,t.length),i.readOnly=!1;var o=document.execCommand("copy");CONFIG.copycode.show_result&&(e.currentTarget.innerText=o?CONFIG.translation.copy_success:CONFIG.translation.copy_failure),i.blur(),e.currentTarget.blur(),r&&(n.removeAllRanges(),n.addRange(r)),document.body.removeChild(i)}),a.on("mouseleave",e=>{setTimeout(()=>{i($(e.currentTarget))},300)}),i(a),$(t).wrap($("<div>").addClass("highlight-wrap")).after(a)})},registerScrollPercent:function(){var e=document.querySelector(".back-to-top"),t=document.querySelector(".reading-progress-bar");$(window).on("load scroll",()=>{var i;if(e||t){var a=document.querySelector(".container").height(),n=window.innerHeight,r=a>n?a-n:document.body.scrollHeight-n,o=Math.round(100*window.scrollY/r);i=Math.min(o,100)+"%"}e&&(window.scrollY>50?e.classList.add("back-to-top-on"):e.classList.remove("back-to-top-on"),e.querySelector("span").innerText=i),t&&(t.style.width=i)}),e&&e.addEventListener("click",()=>{$(document.documentElement).animate({scrollTop:0})})},registerTabsTag:function(){$(".tabs ul.nav-tabs .tab").on("click",e=>{if(e.preventDefault(),!e.currentTarget.classList.contains("active")){[...e.currentTarget.parentNode.children].forEach(e=>{e.classList.remove("active")}),e.currentTarget.classList.add("active");var t=e.currentTarget.querySelector("a").getAttribute("href");[...(t=document.querySelector(t)).parentNode.children].forEach(e=>{e.classList.remove("active")}),t.classList.add("active"),t.dispatchEvent(new Event("tabs:click",{bubbles:!0}))}}),window.dispatchEvent(new Event("tabs:register"))},registerCanIUseTag:function(){window.addEventListener("message",e=>{var t=e.data;if("string"==typeof t&&t.indexOf("ciu_embed")>-1){var i=t.split(":")[1],a=t.split(":")[2];$(`iframe[data-feature=${i}]`).height(parseInt(a,10)+30)}},!1)},registerActiveMenuItem:function(){document.querySelectorAll(".menu-item").forEach(e=>{var t=e.querySelector("a[href]"),i=t.pathname===location.pathname||t.pathname===location.pathname.replace("index.html",""),a="/"!==t.pathname&&0===location.pathname.indexOf(t.pathname);t.hostname===location.hostname&&(i||a)?e.classList.add("menu-item-active"):e.classList.remove("menu-item-active")})},embeddedVideoTransformer:function(){var e=new RegExp(["www.youtube.com","player.vimeo.com","player.youku.com","music.163.com","www.tudou.com"].join("|"));function t(e){return{width:e.width(),height:e.height()}}function i(e,t){return t/e*100}document.querySelectorAll("iframe").forEach(a=>{var n,r=t(a);if(a.src.search(e)>0){var o=i(r.width,r.height);a.css({width:"100%",height:"100%",position:"absolute",top:"0",left:"0"});var s=document.createElement("div");if(s.className="fluid-vids",s.style.position="relative",s.style.marginBottom="20px",s.style.width="100%",s.style.paddingTop=o+"%",""===s.style.paddingTop&&(s.style.paddingTop="50%"),a.parentNode.insertBefore(s,a),s.appendChild(a),a.src.search("music.163.com")>0)((n=t(a)).width>r.width||n.height<r.height)&&(s.style.paddingTop=i(n.width,r.height)+"%")}})},hasMobileUA:function(){var e=navigator.userAgent;return/iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g.test(e)},isTablet:function(){return window.screen.width<992&&window.screen.width>767&&this.hasMobileUA()},isMobile:function(){return window.screen.width<767&&this.hasMobileUA()},isDesktop:function(){return!this.isTablet()&&!this.isMobile()},isMuse:function(){return"Muse"===CONFIG.scheme},isMist:function(){return"Mist"===CONFIG.scheme},isPisces:function(){return"Pisces"===CONFIG.scheme},isGemini:function(){return"Gemini"===CONFIG.scheme},escapeSelector:function(e){return e.replace(/[!"$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g,"\\$&")},updateSidebarPosition:function(){if(this.isDesktop()&&!this.isPisces()&&!this.isGemini()){var e=$(".post-toc-content"),t=CONFIG.page.sidebar;if("boolean"!=typeof t){var i=e.length>0&&e.html().trim().length>0;t="always"===CONFIG.sidebar.display||"post"===CONFIG.sidebar.display&&i}t&&window.dispatchEvent(new Event("sidebar:show"))}},getSidebarSchemePadding:function(){var e=$(".sidebar-inner"),t=e.innerWidth()-e.width(),i="block"===$(".sidebar-nav").css("display")?$(".sidebar-nav").outerHeight(!0):0,a=CONFIG.sidebar.offset||12,n=CONFIG.back2top.enable&&CONFIG.back2top.sidebar?document.querySelector(".back-to-top").height():a;return this.isPisces()||this.isGemini()?2*t+i+a+n:2*t+i/2},getScript:function(e,t,i){i?t():$.ajax({url:e,dataType:"script",cache:!0}).then(t)}};