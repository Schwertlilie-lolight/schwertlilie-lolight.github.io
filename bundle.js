!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.anime=e()}(this,function(){"use strict";var n={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},e={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},r=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],t={CSS:{},springs:{}};function a(n,e,r){return Math.min(Math.max(n,e),r)}function o(n,e){return n.indexOf(e)>-1}function u(n,e){return n.apply(null,e)}var i={arr:function(n){return Array.isArray(n)},obj:function(n){return o(Object.prototype.toString.call(n),"Object")},pth:function(n){return i.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||i.svg(n)},str:function(n){return"string"==typeof n},fnc:function(n){return"function"==typeof n},und:function(n){return void 0===n},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return i.hex(n)||i.rgb(n)||i.hsl(n)},key:function(r){return!n.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&"targets"!==r&&"keyframes"!==r}};function c(n){var e=/\(([^)]+)\)/.exec(n);return e?e[1].split(",").map(function(n){return parseFloat(n)}):[]}function s(n,e){var r=c(n),o=a(i.und(r[0])?1:r[0],.1,100),u=a(i.und(r[1])?100:r[1],.1,100),s=a(i.und(r[2])?10:r[2],.1,100),f=a(i.und(r[3])?0:r[3],.1,100),l=Math.sqrt(u/o),d=s/(2*Math.sqrt(u*o)),p=d<1?l*Math.sqrt(1-d*d):0,h=1,v=d<1?(d*l-f)/p:-f+l;function g(n){var r=e?e*n/1e3:n;return r=d<1?Math.exp(-r*d*l)*(h*Math.cos(p*r)+v*Math.sin(p*r)):(h+v*r)*Math.exp(-r*l),0===n||1===n?n:1-r}return e?g:function(){var e=t.springs[n];if(e)return e;for(var r=0,a=0;;)if(1===g(r+=1/6)){if(++a>=16)break}else a=0;var o=r*(1/6)*1e3;return t.springs[n]=o,o}}function f(n){return void 0===n&&(n=10),function(e){return Math.round(e*n)*(1/n)}}var l,d,p=function(){var n=11,e=1/(n-1);function r(n,e){return 1-3*e+3*n}function t(n,e){return 3*e-6*n}function a(n){return 3*n}function o(n,e,o){return((r(e,o)*n+t(e,o))*n+a(e))*n}function u(n,e,o){return 3*r(e,o)*n*n+2*t(e,o)*n+a(e)}return function(r,t,a,i){if(0<=r&&r<=1&&0<=a&&a<=1){var c=new Float32Array(n);if(r!==t||a!==i)for(var s=0;s<n;++s)c[s]=o(s*e,r,a);return function(n){return r===t&&a===i?n:0===n||1===n?n:o(f(n),t,i)}}function f(t){for(var i=0,s=1,f=n-1;s!==f&&c[s]<=t;++s)i+=e;var l=i+(t-c[--s])/(c[s+1]-c[s])*e,d=u(l,r,a);return d>=.001?function(n,e,r,t){for(var a=0;a<4;++a){var i=u(e,r,t);if(0===i)return e;e-=(o(e,r,t)-n)/i}return e}(t,l,r,a):0===d?l:function(n,e,r,t,a){for(var u,i,c=0;(u=o(i=e+(r-e)/2,t,a)-n)>0?r=i:e=i,Math.abs(u)>1e-7&&++c<10;);return i}(t,i,i+e,r,a)}}}(),h=(l={linear:function(){return function(n){return n}}},d={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var e,r=4;n<((e=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*e-2)/22-n,2)}},Elastic:function(n,e){void 0===n&&(n=1),void 0===e&&(e=.5);var r=a(n,1,10),t=a(e,.1,2);return function(n){return 0===n||1===n?n:-r*Math.pow(2,10*(n-1))*Math.sin((n-1-t/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/t)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach(function(n,e){d[n]=function(){return function(n){return Math.pow(n,e+2)}}}),Object.keys(d).forEach(function(n){var e=d[n];l["easeIn"+n]=e,l["easeOut"+n]=function(n,r){return function(t){return 1-e(n,r)(1-t)}},l["easeInOut"+n]=function(n,r){return function(t){return t<.5?e(n,r)(2*t)/2:1-e(n,r)(-2*t+2)/2}}}),l);function v(n,e){if(i.fnc(n))return n;var r=n.split("(")[0],t=h[r],a=c(n);switch(r){case"spring":return s(n,e);case"cubicBezier":return u(p,a);case"steps":return u(f,a);default:return u(t,a)}}function g(n){try{return document.querySelectorAll(n)}catch(n){return}}function m(n,e){for(var r=n.length,t=arguments.length>=2?arguments[1]:void 0,a=[],o=0;o<r;o++)if(o in n){var u=n[o];e.call(t,u,o,n)&&a.push(u)}return a}function y(n){return n.reduce(function(n,e){return n.concat(i.arr(e)?y(e):e)},[])}function b(n){return i.arr(n)?n:(i.str(n)&&(n=g(n)||n),n instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n])}function M(n,e){return n.some(function(n){return n===e})}function x(n){var e={};for(var r in n)e[r]=n[r];return e}function w(n,e){var r=x(n);for(var t in n)r[t]=e.hasOwnProperty(t)?e[t]:n[t];return r}function k(n,e){var r=x(n);for(var t in e)r[t]=i.und(n[t])?e[t]:n[t];return r}function O(n){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(e)return e[1]}function C(n,e){return i.fnc(n)?n(e.target,e.id,e.total):n}function B(n,e){return n.getAttribute(e)}function P(n,e,r){if(M([r,"deg","rad","turn"],O(e)))return e;var a=t.CSS[e+r];if(!i.und(a))return a;var o=document.createElement(n.tagName),u=n.parentNode&&n.parentNode!==document?n.parentNode:document.body;u.appendChild(o),o.style.position="absolute",o.style.width=100+r;var c=100/o.offsetWidth;u.removeChild(o);var s=c*parseFloat(e);return t.CSS[e+r]=s,s}function I(n,e,r){if(e in n.style){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=n.style[e]||getComputedStyle(n).getPropertyValue(t)||"0";return r?P(n,a,r):a}}function T(n,e){return i.dom(n)&&!i.inp(n)&&(B(n,e)||i.svg(n)&&n[e])?"attribute":i.dom(n)&&M(r,e)?"transform":i.dom(n)&&"transform"!==e&&I(n,e)?"css":null!=n[e]?"object":void 0}function D(n){if(i.dom(n)){for(var e,r=n.style.transform||"",t=/(\w+)\(([^)]*)\)/g,a=new Map;e=t.exec(r);)a.set(e[1],e[2]);return a}}function E(n,e,r,t){switch(T(n,e)){case"transform":return function(n,e,r,t){var a,u=o(e,"scale")?1:0+(o(a=e,"translate")||"perspective"===a?"px":o(a,"rotate")||o(a,"skew")?"deg":void 0),i=D(n).get(e)||u;return r&&(r.transforms.list.set(e,i),r.transforms.last=e),t?P(n,i,t):i}(n,e,t,r);case"css":return I(n,e,r);case"attribute":return B(n,e);default:return n[e]||0}}function F(n,e){var r=/^(\*=|\+=|-=)/.exec(n);if(!r)return n;var t=O(n)||0,a=parseFloat(e),o=parseFloat(n.replace(r[0],""));switch(r[0][0]){case"+":return a+o+t;case"-":return a-o+t;case"*":return a*o+t}}function N(n,e){if(i.col(n))return function(n){return i.rgb(n)?(r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e=n))?"rgba("+r[1]+",1)":e:i.hex(n)?(t=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,e,r,t){return e+e+r+r+t+t}),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),"rgba("+parseInt(a[1],16)+","+parseInt(a[2],16)+","+parseInt(a[3],16)+",1)"):i.hsl(n)?function(n){var e,r,t,a=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(n),o=parseInt(a[1],10)/360,u=parseInt(a[2],10)/100,i=parseInt(a[3],10)/100,c=a[4]||1;function s(n,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+6*(e-n)*r:r<.5?e:r<2/3?n+(e-n)*(2/3-r)*6:n}if(0==u)e=r=t=i;else{var f=i<.5?i*(1+u):i+u-i*u,l=2*i-f;e=s(l,f,o+1/3),r=s(l,f,o),t=s(l,f,o-1/3)}return"rgba("+255*e+","+255*r+","+255*t+","+c+")"}(n):void 0;var e,r,t,a}(n);if(/\s/g.test(n))return n;var r=O(n),t=r?n.substr(0,n.length-r.length):n;return e?t+e:t}function A(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function L(n){for(var e,r=n.points,t=0,a=0;a<r.numberOfItems;a++){var o=r.getItem(a);a>0&&(t+=A(e,o)),e=o}return t}function j(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return o=n,2*Math.PI*B(o,"r");case"rect":return 2*B(a=n,"width")+2*B(a,"height");case"line":return A({x:B(t=n,"x1"),y:B(t,"y1")},{x:B(t,"x2"),y:B(t,"y2")});case"polyline":return L(n);case"polygon":return r=(e=n).points,L(e)+A(r.getItem(r.numberOfItems-1),r.getItem(0))}var e,r,t,a,o}function S(n,e){var r=e||{},t=r.el||function(n){for(var e=n.parentNode;i.svg(e)&&i.svg(e.parentNode);)e=e.parentNode;return e}(n),a=t.getBoundingClientRect(),o=B(t,"viewBox"),u=a.width,c=a.height,s=r.viewBox||(o?o.split(" "):[0,0,u,c]);return{el:t,viewBox:s,x:s[0]/1,y:s[1]/1,w:u/s[2],h:c/s[3]}}function q(n,e){function r(r){void 0===r&&(r=0);var t=e+r>=1?e+r:0;return n.el.getPointAtLength(t)}var t=S(n.el,n.svg),a=r(),o=r(-1),u=r(1);switch(n.property){case"x":return(a.x-t.x)*t.w;case"y":return(a.y-t.y)*t.h;case"angle":return 180*Math.atan2(u.y-o.y,u.x-o.x)/Math.PI}}function $(n,e){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,t=N(i.pth(n)?n.totalLength:n,e)+"";return{original:t,numbers:t.match(r)?t.match(r).map(Number):[0],strings:i.str(n)||e?t.split(r):[]}}function X(n){return m(n?y(i.arr(n)?n.map(b):b(n)):[],function(n,e,r){return r.indexOf(n)===e})}function Y(n){var e=X(n);return e.map(function(n,r){return{target:n,id:r,total:e.length,transforms:{list:D(n)}}})}function Z(n,e){var r=x(e);if(/^spring/.test(r.easing)&&(r.duration=s(r.easing)),i.arr(n)){var t=n.length;2!==t||i.obj(n[0])?i.fnc(e.duration)||(r.duration=e.duration/t):n={value:n}}var a=i.arr(n)?n:[n];return a.map(function(n,r){var t=i.obj(n)&&!i.pth(n)?n:{value:n};return i.und(t.delay)&&(t.delay=r?0:e.delay),i.und(t.endDelay)&&(t.endDelay=r===a.length-1?e.endDelay:0),t}).map(function(n){return k(n,r)})}function Q(n,e){var r=[],t=e.keyframes;for(var a in t&&(e=k(function(n){for(var e=m(y(n.map(function(n){return Object.keys(n)})),function(n){return i.key(n)}).reduce(function(n,e){return n.indexOf(e)<0&&n.push(e),n},[]),r={},t=function(t){var a=e[t];r[a]=n.map(function(n){var e={};for(var r in n)i.key(r)?r==a&&(e.value=n[r]):e[r]=n[r];return e})},a=0;a<e.length;a++)t(a);return r}(t),e)),e)i.key(a)&&r.push({name:a,tweens:Z(e[a],n)});return r}var V={css:function(n,e,r){return n.style[e]=r},attribute:function(n,e,r){return n.setAttribute(e,r)},object:function(n,e,r){return n[e]=r},transform:function(n,e,r,t,a){if(t.list.set(e,r),e===t.last||a){var o="";t.list.forEach(function(n,e){o+=e+"("+n+") "}),n.style.transform=o}}};function z(n,e){Y(n).forEach(function(n){for(var r in e){var t=C(e[r],n),a=n.target,o=O(t),u=E(a,r,o,n),i=F(N(t,o||O(u)),u),c=T(a,r);V[c](a,r,i,n.transforms,!0)}})}function H(n,e){return m(y(n.map(function(n){return e.map(function(e){return function(n,e){var r=T(n.target,e.name);if(r){var t=function(n,e){var r;return n.tweens.map(function(t){var a=function(n,e){var r={};for(var t in n){var a=C(n[t],e);i.arr(a)&&1===(a=a.map(function(n){return C(n,e)})).length&&(a=a[0]),r[t]=a}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(t,e),o=a.value,u=i.arr(o)?o[1]:o,c=O(u),s=E(e.target,n.name,c,e),f=r?r.to.original:s,l=i.arr(o)?o[0]:f,d=O(l)||O(s),p=c||d;return i.und(u)&&(u=f),a.from=$(l,p),a.to=$(F(u,l),p),a.start=r?r.end:0,a.end=a.start+a.delay+a.duration+a.endDelay,a.easing=v(a.easing,a.duration),a.isPath=i.pth(o),a.isColor=i.col(a.from.original),a.isColor&&(a.round=1),r=a,a})}(e,n),a=t[t.length-1];return{type:r,property:e.name,animatable:n,tweens:t,duration:a.end,delay:t[0].delay,endDelay:a.endDelay}}}(n,e)})})),function(n){return!i.und(n)})}function G(n,e){var r=n.length,t=function(n){return n.timelineOffset?n.timelineOffset:0},a={};return a.duration=r?Math.max.apply(Math,n.map(function(n){return t(n)+n.duration})):e.duration,a.delay=r?Math.min.apply(Math,n.map(function(n){return t(n)+n.delay})):e.delay,a.endDelay=r?a.duration-Math.max.apply(Math,n.map(function(n){return t(n)+n.duration-n.endDelay})):e.endDelay,a}var R,W=0,J=[],K=[],U=function(){function n(){R=requestAnimationFrame(e)}function e(e){var r=J.length;if(r){for(var t=0;t<r;){var a=J[t];if(a.paused){var o=J.indexOf(a);o>-1&&(J.splice(o,1),r=J.length)}else a.tick(e);t++}n()}else R=cancelAnimationFrame(R)}return n}();function _(r){void 0===r&&(r={});var t,o=0,u=0,i=0,c=0,s=null;function f(n){var e=window.Promise&&new Promise(function(n){return s=n});return n.finished=e,e}var l,d,p,h,v,g,y,b,M=(d=w(n,l=r),h=Q(p=w(e,l),l),y=G(g=H(v=Y(l.targets),h),p),b=W,W++,k(d,{id:b,children:[],animatables:v,animations:g,duration:y.duration,delay:y.delay,endDelay:y.endDelay}));function x(){var n=M.direction;"alternate"!==n&&(M.direction="normal"!==n?"normal":"reverse"),M.reversed=!M.reversed,t.forEach(function(n){return n.reversed=M.reversed})}function O(n){return M.reversed?M.duration-n:n}function C(){o=0,u=O(M.currentTime)*(1/_.speed)}function B(n,e){e&&e.seek(n-e.timelineOffset)}function P(n){for(var e=0,r=M.animations,t=r.length;e<t;){var o=r[e],u=o.animatable,i=o.tweens,c=i.length-1,s=i[c];c&&(s=m(i,function(e){return n<e.end})[0]||s);for(var f=a(n-s.start-s.delay,0,s.duration)/s.duration,l=isNaN(f)?1:s.easing(f),d=s.to.strings,p=s.round,h=[],v=s.to.numbers.length,g=void 0,y=0;y<v;y++){var b=void 0,x=s.to.numbers[y],w=s.from.numbers[y]||0;b=s.isPath?q(s.value,l*x):w+l*(x-w),p&&(s.isColor&&y>2||(b=Math.round(b*p)/p)),h.push(b)}var k=d.length;if(k){g=d[0];for(var O=0;O<k;O++){d[O];var C=d[O+1],B=h[O];isNaN(B)||(g+=C?B+C:B+" ")}}else g=h[0];V[o.type](u.target,o.property,g,u.transforms),o.currentValue=g,e++}}function I(n){M[n]&&!M.passThrough&&M[n](M)}function T(n){var e=M.duration,r=M.delay,l=e-M.endDelay,d=O(n);M.progress=a(d/e*100,0,100),M.reversePlayback=d<M.currentTime,t&&function(n){if(M.reversePlayback)for(var e=c;e--;)B(n,t[e]);else for(var r=0;r<c;r++)B(n,t[r])}(d),!M.began&&M.currentTime>0&&(M.began=!0,I("begin")),!M.loopBegan&&M.currentTime>0&&(M.loopBegan=!0,I("loopBegin")),d<=r&&0!==M.currentTime&&P(0),(d>=l&&M.currentTime!==e||!e)&&P(e),d>r&&d<l?(M.changeBegan||(M.changeBegan=!0,M.changeCompleted=!1,I("changeBegin")),I("change"),P(d)):M.changeBegan&&(M.changeCompleted=!0,M.changeBegan=!1,I("changeComplete")),M.currentTime=a(d,0,e),M.began&&I("update"),n>=e&&(u=0,M.remaining&&!0!==M.remaining&&M.remaining--,M.remaining?(o=i,I("loopComplete"),M.loopBegan=!1,"alternate"===M.direction&&x()):(M.paused=!0,M.completed||(M.completed=!0,I("loopComplete"),I("complete"),!M.passThrough&&"Promise"in window&&(s(),f(M)))))}return f(M),M.reset=function(){var n=M.direction;M.passThrough=!1,M.currentTime=0,M.progress=0,M.paused=!0,M.began=!1,M.loopBegan=!1,M.changeBegan=!1,M.completed=!1,M.changeCompleted=!1,M.reversePlayback=!1,M.reversed="reverse"===n,M.remaining=M.loop,t=M.children;for(var e=c=t.length;e--;)M.children[e].reset();(M.reversed&&!0!==M.loop||"alternate"===n&&1===M.loop)&&M.remaining++,P(M.reversed?M.duration:0)},M.set=function(n,e){return z(n,e),M},M.tick=function(n){i=n,o||(o=i),T((i+(u-o))*_.speed)},M.seek=function(n){T(O(n))},M.pause=function(){M.paused=!0,C()},M.play=function(){M.paused&&(M.completed&&M.reset(),M.paused=!1,J.push(M),C(),R||U())},M.reverse=function(){x(),C()},M.restart=function(){M.reset(),M.play()},M.reset(),M.autoplay&&M.play(),M}function nn(n,e){for(var r=e.length;r--;)M(n,e[r].animatable.target)&&e.splice(r,1)}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){document.hidden?(J.forEach(function(n){return n.pause()}),K=J.slice(0),_.running=J=[]):K.forEach(function(n){return n.play()})}),_.version="3.1.0",_.speed=1,_.running=J,_.remove=function(n){for(var e=X(n),r=J.length;r--;){var t=J[r],a=t.animations,o=t.children;nn(e,a);for(var u=o.length;u--;){var i=o[u],c=i.animations;nn(e,c),c.length||i.children.length||o.splice(u,1)}a.length||o.length||t.pause()}},_.get=E,_.set=z,_.convertPx=P,_.path=function(n,e){var r=i.str(n)?g(n)[0]:n,t=e||100;return function(n){return{property:n,el:r,svg:S(r),totalLength:j(r)*(t/100)}}},_.setDashoffset=function(n){var e=j(n);return n.setAttribute("stroke-dasharray",e),e},_.stagger=function(n,e){void 0===e&&(e={});var r=e.direction||"normal",t=e.easing?v(e.easing):null,a=e.grid,o=e.axis,u=e.from||0,c="first"===u,s="center"===u,f="last"===u,l=i.arr(n),d=l?parseFloat(n[0]):parseFloat(n),p=l?parseFloat(n[1]):0,h=O(l?n[1]:n)||0,g=e.start||0+(l?d:0),m=[],y=0;return function(n,e,i){if(c&&(u=0),s&&(u=(i-1)/2),f&&(u=i-1),!m.length){for(var v=0;v<i;v++){if(a){var b=s?(a[0]-1)/2:u%a[0],M=s?(a[1]-1)/2:Math.floor(u/a[0]),x=b-v%a[0],w=M-Math.floor(v/a[0]),k=Math.sqrt(x*x+w*w);"x"===o&&(k=-x),"y"===o&&(k=-w),m.push(k)}else m.push(Math.abs(u-v));y=Math.max.apply(Math,m)}t&&(m=m.map(function(n){return t(n/y)*y})),"reverse"===r&&(m=m.map(function(n){return o?n<0?-1*n:-n:Math.abs(y-n)}))}return g+(l?(p-d)/y:d)*(Math.round(100*m[e])/100)+h}},_.timeline=function(n){void 0===n&&(n={});var r=_(n);return r.duration=0,r.add=function(t,a){var o=J.indexOf(r),u=r.children;function c(n){n.passThrough=!0}o>-1&&J.splice(o,1);for(var s=0;s<u.length;s++)c(u[s]);var f=k(t,w(e,n));f.targets=f.targets||n.targets;var l=r.duration;f.autoplay=!1,f.direction=r.direction,f.timelineOffset=i.und(a)?l:F(a,l),c(r),r.seek(f.timelineOffset);var d=_(f);c(d),u.push(d);var p=G(u,n);return r.delay=p.delay,r.endDelay=p.endDelay,r.duration=p.duration,r.seek(0),r.reset(),r.autoplay&&r.play(),r},r},_.easing=v,_.penner=h,_.random=function(n,e){return Math.floor(Math.random()*(e-n+1))+n},_});;HTMLElement.prototype.outerHeight=function(e){var t=this.offsetHeight;if(!e)return t;var n=window.getComputedStyle(this);return t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)},HTMLElement.prototype.wrap=function(e){this.parentNode.insertBefore(e,this),this.parentNode.removeChild(this),e.appendChild(this)},NexT.utils={wrapImageWithFancyBox:function(){document.querySelectorAll(".post-body :not(a) > img").forEach(e=>{var t=$(e),n=t.attr("data-src")||t.attr("src"),r=t.wrap(`<a class="fancybox fancybox.image" href="${n}" itemscope itemtype="http://schema.org/ImageObject" itemprop="url"></a>`).parent("a");t.is(".post-gallery img")?(r.addClass("post-gallery-img"),r.attr("data-fancybox","gallery").attr("rel","gallery")):t.is(".group-picture img")?r.attr("data-fancybox","group").attr("rel","group"):r.attr("data-fancybox","default").attr("rel","default");var a=t.attr("title")||t.attr("alt");a&&(r.append(`<p class="image-caption">${a}</p>`),r.attr("title",a).attr("data-caption",a))}),$.fancybox.defaults.hash=!1,$(".fancybox").fancybox({loop:!0,helpers:{overlay:{locked:!1}}})},registerExtURL:function(){document.querySelectorAll(".exturl").forEach(e=>{e.addEventListener("click",e=>{var t=e.currentTarget.getAttribute("data-url"),n=decodeURIComponent(escape(window.atob(t)));return window.open(n,"_blank","noopener"),!1})})},registerCopyCode:function(){document.querySelectorAll("figure.highlight").forEach(e=>{const t=e=>{"mac"===CONFIG.copycode.style?e.innerHTML='<i class="fa fa-clipboard"></i>':e.innerText=CONFIG.translation.copy_button},n=document.createElement("div");n.classList.add("highlight-wrap"),e.wrap(n),e.parentNode.insertAdjacentHTML("beforeend",'<div class="copy-btn"></div>');var r=e.parentNode.querySelector(".copy-btn");r.addEventListener("click",e=>{var t=[...e.currentTarget.parentNode.querySelectorAll(".code .line")].map(e=>e.innerText).join("\n"),n=document.createElement("textarea"),r=window.scrollY;n.style.top=r+"px",n.style.position="absolute",n.style.opacity="0",n.readOnly=!0,n.value=t,document.body.append(n);const a=document.getSelection(),o=a.rangeCount>0&&a.getRangeAt(0);n.select(),n.setSelectionRange(0,t.length),n.readOnly=!1;var i=document.execCommand("copy");CONFIG.copycode.show_result&&(e.currentTarget.innerText=i?CONFIG.translation.copy_success:CONFIG.translation.copy_failure),n.blur(),e.currentTarget.blur(),o&&(a.removeAllRanges(),a.addRange(o)),document.body.removeChild(n)}),r.addEventListener("mouseleave",e=>{setTimeout(()=>{t(e.target)},300)}),t(r)})},wrapTableWithBox:function(){document.querySelectorAll("table").forEach(e=>{const t=document.createElement("div");t.className="table-container",e.wrap(t)})},registerVideoIframe:function(){document.querySelectorAll("iframe").forEach(e=>{const t=new RegExp(["www.youtube.com","player.vimeo.com","player.youku.com","player.bilibili.com","www.tudou.com"].join("|"));if(!e.parentNode.matches(".video-container")&&e.src.search(t)>0){const t=document.createElement("div");t.className="video-container",e.wrap(t);let n=Number(e.width),r=Number(e.height);n&&r&&(e.parentNode.style.paddingTop=r/n*100+"%")}})},registerScrollPercent:function(){var e=document.querySelector(".back-to-top"),t=document.querySelector(".reading-progress-bar");window.addEventListener("scroll",()=>{var n;if(e||t){var r=document.querySelector(".container").offsetHeight,a=window.innerHeight,o=r>a?r-a:document.body.scrollHeight-a,i=Math.round(100*window.scrollY/o);n=Math.min(i,100)+"%"}e&&(window.scrollY>50?e.classList.add("back-to-top-on"):e.classList.remove("back-to-top-on"),e.querySelector("span").innerText=n),t&&(t.style.width=n)}),e&&e.addEventListener("click",()=>{window.anime({targets:document.documentElement,duration:500,easing:"linear",scrollTop:0})})},registerTabsTag:function(){document.querySelectorAll(".tabs ul.nav-tabs .tab").forEach(e=>{e.addEventListener("click",e=>{if(e.preventDefault(),!e.currentTarget.classList.contains("active")){[...e.currentTarget.parentNode.children].forEach(e=>{e.classList.remove("active")}),e.currentTarget.classList.add("active");var t=e.currentTarget.querySelector("a").getAttribute("href");[...(t=document.querySelector(t)).parentNode.children].forEach(e=>{e.classList.remove("active")}),t.classList.add("active"),t.dispatchEvent(new Event("tabs:click",{bubbles:!0}))}})}),window.dispatchEvent(new Event("tabs:register"))},registerCanIUseTag:function(){window.addEventListener("message",e=>{var t=e.data;if("string"==typeof t&&t.indexOf("ciu_embed")>-1){var n=t.split(":")[1],r=t.split(":")[2];document.querySelector(`iframe[data-feature=${n}]`).style.height=parseInt(r,10)+"px"}},!1)},registerActiveMenuItem:function(){document.querySelectorAll(".menu-item").forEach(e=>{var t=e.querySelector("a[href]");if(t){var n=t.pathname===location.pathname||t.pathname===location.pathname.replace("index.html",""),r=t.pathname!==CONFIG.root&&0===location.pathname.indexOf(t.pathname);t.hostname===location.hostname&&(n||r)?e.classList.add("menu-item-active"):e.classList.remove("menu-item-active")}})},registerSidebarTOC:function(){const e=document.querySelectorAll(".post-toc li"),t=[...e].map(e=>{var t=e.querySelector("a.nav-link");return t.addEventListener("click",e=>{e.preventDefault();var t=document.getElementById(e.currentTarget.getAttribute("href").replace("#","")).getBoundingClientRect().top+window.scrollY;window.anime({targets:document.documentElement,duration:500,easing:"linear",scrollTop:t+10})}),document.getElementById(t.getAttribute("href").replace("#",""))});var n=document.querySelector(".post-toc-wrap");!function r(a){a=Math.floor(a+1e4);let o=new IntersectionObserver((o,i)=>{let c=document.documentElement.scrollHeight+100;if(c>a)return i.disconnect(),void r(c);let s=function(e){let n=0,r=e[n];if(r.boundingClientRect.top>0)return 0===(n=t.indexOf(r.target))?0:n-1;for(;n<e.length;n++){if(!(e[n].boundingClientRect.top<=0))return t.indexOf(r.target);r=e[n]}return t.indexOf(r.target)}(o);!function(e){if(!e.classList.contains("active-current")){document.querySelectorAll(".post-toc .active").forEach(e=>{e.classList.remove("active","active-current")}),e.classList.add("active","active-current");for(var t=e.parentNode;!t.matches(".post-toc");)t.matches("li")&&t.classList.add("active"),t=t.parentNode;window.anime({targets:n,duration:200,easing:"linear",scrollTop:n.scrollTop-n.offsetHeight/2+e.getBoundingClientRect().top-n.getBoundingClientRect().top})}}(e[s])},{rootMargin:a+"px 0px -100% 0px",threshold:0});t.forEach(e=>o.observe(e))}(document.documentElement.scrollHeight)},hasMobileUA:function(){var e=navigator.userAgent;return/iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g.test(e)},isTablet:function(){return window.screen.width<992&&window.screen.width>767&&this.hasMobileUA()},isMobile:function(){return window.screen.width<767&&this.hasMobileUA()},isDesktop:function(){return!this.isTablet()&&!this.isMobile()},isMuse:function(){return"Muse"===CONFIG.scheme},isMist:function(){return"Mist"===CONFIG.scheme},isPisces:function(){return"Pisces"===CONFIG.scheme},isGemini:function(){return"Gemini"===CONFIG.scheme},initSidebarDimension:function(){var e=document.querySelector(".sidebar-nav"),t="none"!==e.style.display?e.outerHeight(!0):0,n=CONFIG.sidebar.offset||12,r=CONFIG.back2top.enable&&CONFIG.back2top.sidebar?document.querySelector(".back-to-top").offsetHeight:0,a=CONFIG.sidebarPadding+t+r;(NexT.utils.isPisces()||NexT.utils.isGemini())&&(a+=2*n-12);var o=document.body.offsetHeight-a+"px";document.querySelector(".site-overview-wrap").style.maxHeight=o,document.querySelector(".post-toc-wrap").style.maxHeight=o},updateSidebarPosition:function(){var e=document.querySelector(".sidebar-nav"),t=document.querySelector(".post-toc");if(t?(e.style.display="",e.classList.add("motion-element"),document.querySelector(".sidebar-nav-toc").click()):(e.style.display="none",e.classList.remove("motion-element"),document.querySelector(".sidebar-nav-overview").click()),NexT.utils.initSidebarDimension(),this.isDesktop()&&!this.isPisces()&&!this.isGemini()){var n=CONFIG.page.sidebar;"boolean"!=typeof n&&(n="always"===CONFIG.sidebar.display||"post"===CONFIG.sidebar.display&&t),n&&window.dispatchEvent(new Event("sidebar:show"))}},getScript:function(e,t,n){if(n)t();else{var r=document.createElement("script");r.onload=r.onreadystatechange=function(e,n){(n||!r.readyState||/loaded|complete/.test(r.readyState))&&(r.onload=r.onreadystatechange=null,r=void 0,!n&&t&&setTimeout(t,0))},r.src=e,document.head.appendChild(r)}}};;NexT.motion={},NexT.motion.integrator={queue:[],cursor:-1,init:function(){return this.queue=[],this.cursor=-1,this},add:function(t){return this.queue.push(t),this},next:function(){this.cursor++;var t=this.queue[this.cursor];"function"==typeof t&&t(NexT.motion.integrator)},bootstrap:function(){this.next()}},NexT.motion.middleWares={logo:function(t){var o=[],e=document.querySelector(".brand"),i=document.querySelector(".custom-logo-image"),n=document.querySelector(".site-title"),s=document.querySelector(".site-subtitle"),r=document.querySelector(".logo-line-before i"),u=document.querySelector(".logo-line-after i");function c(t,o){return{e:t,p:{translateX:o},o:{duration:500,sequenceQueue:!1}}}function l(){o.push({e:i,p:{opacity:1,top:0},o:{duration:200}})}e&&o.push({e:e,p:{opacity:1},o:{duration:200}}),NexT.utils.isMist()&&r&&u&&o.push(c(r,"100%"),c(u,"-100%")),NexT.utils.isMuse()&&i&&l(),n&&o.push({e:n,p:{opacity:1,top:0},o:{duration:200}}),s&&o.push({e:s,p:{opacity:1,top:0},o:{duration:200}}),(NexT.utils.isPisces()||NexT.utils.isGemini())&&i&&l(),o.length>0?(o[o.length-1].o.complete=function(){t.next()},Velocity.RunSequence(o)):t.next(),CONFIG.motion.async&&t.next()},menu:function(t){Velocity(document.querySelectorAll(".menu-item"),"transition.slideDownIn",{display:null,duration:200,complete:function(){t.next()}}),CONFIG.motion.async&&t.next()},postList:function(t){var o=document.querySelectorAll(".post-block, .pagination, .comments"),e=CONFIG.motion.transition.post_block,i=document.querySelectorAll(".post-header"),n=CONFIG.motion.transition.post_header,s=document.querySelectorAll(".post-body"),r=CONFIG.motion.transition.post_body,u=document.querySelectorAll(".collection-header"),c=CONFIG.motion.transition.coll_header;if(o.length>0){var l=window.postMotionOptions||{stagger:100,drag:!0,complete:function(){t.next()}};CONFIG.motion.transition.post_block&&Velocity(o,"transition."+e,l),CONFIG.motion.transition.post_header&&Velocity(i,"transition."+n,l),CONFIG.motion.transition.post_body&&Velocity(s,"transition."+r,l),CONFIG.motion.transition.coll_header&&Velocity(u,"transition."+c,l)}(NexT.utils.isPisces()||NexT.utils.isGemini())&&t.next()},sidebar:function(t){NexT.utils.updateSidebarPosition();var o=document.querySelector(".sidebar-inner"),e=CONFIG.motion.transition.sidebar;CONFIG.motion.transition.sidebar&&(NexT.utils.isPisces()||NexT.utils.isGemini())&&Velocity(o,"transition."+e,{display:null,duration:200,complete:function(){o.style.transform="initial"}}),t.next()}};;var Affix={init:function(t,e){this.options=Object.assign({offset:0},e),window.addEventListener("scroll",this.checkPosition.bind(this)),window.addEventListener("click",this.checkPositionWithEventLoop.bind(this)),window.matchMedia("(min-width: 992px)").addListener(t=>{t.matches&&(this.options={offset:NexT.utils.getAffixParam()},this.checkPosition())}),this.element=t,this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()},getState:function(t,e,i,n){let o=window.scrollY,s=window.innerHeight;if(null!=i&&"top"===this.affixed)return o<i&&"top";if("bottom"===this.affixed)return null!=i?!(o+this.unpin<=this.element.getBoundingClientRect().top+o)&&"bottom":!(o+s<=t-n)&&"bottom";let f=null===this.affixed,l=f?o:this.element.getBoundingClientRect().top+o;return null!=i&&o<=i?"top":null!=n&&l+(f?s:e)>=t-n&&"bottom"},getPinnedOffset:function(){return this.pinnedOffset?this.pinnedOffset:(this.element.classList.remove("affix-top","affix-bottom"),this.element.classList.add("affix"),this.pinnedOffset=this.element.getBoundingClientRect().top)},checkPositionWithEventLoop(){setTimeout(this.checkPosition.bind(this),1)},checkPosition:function(){if("none"===window.getComputedStyle(this.element).display)return;let t=this.element.offsetHeight-CONFIG.sidebarPadding,e=this.options.offset,i=e.top,n=e.bottom,o=document.body.scrollHeight,s=this.getState(o,t,i,n);if(this.affixed!==s){null!=this.unpin&&(this.element.style.top="");let t="affix"+(s?"-"+s:"");this.affixed=s,this.unpin="bottom"===s?this.getPinnedOffset():null,this.element.classList.remove("affix","affix-top","affix-bottom"),this.element.classList.add(t)}"bottom"===s&&(this.element.style.top=o-t-n+"px")}};NexT.utils.getAffixParam=function(){const t=CONFIG.sidebar.offset||12;let e=document.querySelector(".header-inner").offsetHeight+t,i=document.querySelector("#footer"),n=document.querySelector(".footer-inner"),o=i.offsetHeight-n.offsetHeight,s=i.offsetHeight+o;return document.querySelector(".sidebar").style.marginTop=e+"px",{top:e-t,bottom:s}},window.addEventListener("DOMContentLoaded",()=>{Affix.init(document.querySelector(".sidebar-inner"),{offset:NexT.utils.getAffixParam()})});;NexT.boot={},NexT.boot.registerEvents=function(){NexT.utils.registerScrollPercent(),NexT.utils.registerCanIUseTag(),document.querySelector(".site-nav-toggle button").addEventListener("click",()=>{var e=document.querySelector(".site-nav"),t=e.classList.contains("site-nav-on")?"slideUp":"slideDown";"function"==typeof Velocity?Velocity(e,t,{duration:200,complete:function(){e.classList.toggle("site-nav-on")}}):e.classList.toggle("site-nav-on")});document.querySelectorAll(".sidebar-nav li").forEach((e,t)=>{e.addEventListener("click",e=>{var i=e.currentTarget;if(!i.classList.contains("sidebar-nav-active")){var o=document.querySelectorAll(".sidebar-panel"),a=o[t],n=o[1-t];window.anime({targets:n,duration:200,easing:"linear",opacity:0,complete:()=>{n.classList.remove("sidebar-panel-active"),a.style.opacity=0,a.classList.add("sidebar-panel-active"),window.anime({targets:a,duration:200,easing:"linear",opacity:1})}}),[...i.parentNode.children].forEach(e=>{e.classList.remove("sidebar-nav-active")}),i.classList.add("sidebar-nav-active")}})}),window.addEventListener("resize",NexT.utils.initSidebarDimension),window.addEventListener("hashchange",()=>{var e=location.hash;if(""!==e&&!e.match(/%\S{2}/)){var t=document.querySelector(`.tabs ul.nav-tabs li a[href="${e}"]`);t&&t.click()}})},NexT.boot.refresh=function(){CONFIG.fancybox&&NexT.utils.wrapImageWithFancyBox(),CONFIG.mediumzoom&&window.mediumZoom(".post-body :not(a) > img"),CONFIG.lazyload&&window.lozad(".post-body img").observe(),CONFIG.pangu&&window.pangu.spacingPage(),CONFIG.exturl&&NexT.utils.registerExtURL(),CONFIG.copycode.enable&&NexT.utils.registerCopyCode(),NexT.utils.registerTabsTag(),NexT.utils.registerActiveMenuItem(),NexT.utils.registerSidebarTOC(),NexT.utils.wrapTableWithBox(),NexT.utils.registerVideoIframe()},NexT.boot.motion=function(){CONFIG.motion.enable?NexT.motion.integrator.add(NexT.motion.middleWares.logo).add(NexT.motion.middleWares.menu).add(NexT.motion.middleWares.postList).add(NexT.motion.middleWares.sidebar).bootstrap():NexT.utils.updateSidebarPosition()},window.addEventListener("DOMContentLoaded",()=>{NexT.boot.registerEvents(),NexT.boot.refresh(),NexT.boot.motion()});;window.addEventListener("DOMContentLoaded",()=>{"use strict";var e=()=>{localStorage.setItem("bookmark"+location.pathname,window.scrollY)},o=()=>{var e=localStorage.getItem("bookmark"+location.pathname);e=parseInt(e,10),isNaN(e)||""!==location.hash||window.anime({targets:document.documentElement,duration:200,easing:"linear",scrollTop:e})};!function(t){var a=document.querySelector(".book-mark-link");window.addEventListener("scroll",()=>{0===window.scrollY?a.classList.add("book-mark-link-fixed"):a.classList.remove("book-mark-link-fixed")}),"auto"===t&&(window.addEventListener("beforeunload",e),window.addEventListener("pjax:send",e)),a.addEventListener("click",o=>{o.preventDefault(),e(),window.anime({targets:a,duration:200,easing:"linear",top:-30,complete:()=>{setTimeout(()=>{a.style.top=""},400)}})}),o(),window.addEventListener("pjax:success",o)}(CONFIG.bookmark.save)});;window.addEventListener("DOMContentLoaded",()=>{let e,t=!1,r=!0,n=CONFIG.path;0===n.length?n="search.xml":/json$/i.test(n)&&(r=!1);const o=CONFIG.root+n,l=document.getElementById("search-input"),s=document.getElementById("search-result"),a=(e,t,r)=>{let n=e.length;if(0===n)return[];let o=0,l=[],s=[];for(r||(t=t.toLowerCase(),e=e.toLowerCase());(l=t.indexOf(e,o))>-1;)s.push({position:l,word:e}),o=l+n;return s},c=(e,t,r,n)=>{let o=r[r.length-1],l=o.position,s=o.word,a=[],c=0;for(;l+s.length<=t&&0!==r.length;){s===n&&c++,a.push({position:l,length:s.length});let e=l+s.length;for(r.pop();0!==r.length&&(l=(o=r[r.length-1]).position,s=o.word,e>l);)r.pop()}return{hits:a,start:e,end:t,searchTextCount:c}},i=(e,t)=>{let r="",n=t.start;return t.hits.forEach(t=>{r+=e.substring(n,t.position);let o=t.position+t.length;r+=`<b class="search-keyword">${e.substring(t.position,o)}</b>`,n=o}),r+=e.substring(n,t.end)},h=()=>{let t=l.value.trim().toLowerCase(),r=t.split(/[-\s]+/);r.length>1&&r.push(t);let n=[];if(t.length>0&&e.forEach(e=>{if(!e.title)return;let o=0,l=e.title.trim(),s=l.toLowerCase(),h=e.content?e.content.trim().replace(/<[^>]+>/g,""):"";CONFIG.localsearch.unescape&&(h=(e=>String(e).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#x3A;/g,":").replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(t)).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"))(h));let u=h.toLowerCase(),p=decodeURIComponent(e.url).replace(/\/{2,}/g,"/"),d=[],g=[];if(r.forEach(e=>{d=d.concat(a(e,s,!1)),g=g.concat(a(e,u,!1))}),d.length>0||g.length>0){let e=d.length+g.length;[d,g].forEach(e=>{e.sort((e,t)=>t.position!==e.position?t.position-e.position:e.word.length-t.word.length)});let r=[];if(0!==d.length){let e=c(0,l.length,d,t);o+=e.searchTextCountInSlice,r.push(e)}let s=[];for(;0!==g.length;){let e=g[g.length-1],r=e.position,n=e.word,l=r-20,a=r+80;l<0&&(l=0),a<r+n.length&&(a=r+n.length),a>h.length&&(a=h.length);let i=c(l,a,g,t);o+=i.searchTextCountInSlice,s.push(i)}s.sort((e,t)=>e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hits.length!==t.hits.length?t.hits.length-e.hits.length:e.start-t.start);let a=parseInt(CONFIG.localsearch.top_n_per_article,10);a>=0&&(s=s.slice(0,a));let u="";0!==r.length?u+=`<li><a href="${p}" class="search-result-title">${i(l,r[0])}</a>`:u+=`<li><a href="${p}" class="search-result-title">${l}</a>`,s.forEach(e=>{u+=`<a href="${p}"><p class="search-result">${i(h,e)}...</p></a>`}),u+="</li>",n.push({item:u,searchTextCount:o,hitCount:e,id:n.length})}}),1===r.length&&""===r[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x"></i></div>';else if(0===n.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>';else{n.sort((e,t)=>e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hitCount!==t.hitCount?t.hitCount-e.hitCount:t.id-e.id);let e='<ul class="search-result-list">';n.forEach(t=>{e+=t.item}),e+="</ul>",s.innerHTML=e,window.pjax&&window.pjax.refresh(s)}},u=n=>{fetch(o).then(e=>e.text()).then(o=>{t=!0,e=r?[...(new DOMParser).parseFromString(o,"text/xml").querySelectorAll("entry")].map(e=>({title:e.querySelector("title").innerHTML,content:e.querySelector("content").innerHTML,url:e.querySelector("url").innerHTML})):JSON.parse(o),document.querySelector(".search-pop-overlay").innerHTML="",document.body.style.overflow="",n&&n()})};CONFIG.localsearch.preload&&u();const p=()=>{document.body.style.overflow="hidden",document.querySelector(".search-pop-overlay").style.display="block",document.querySelector(".popup").style.display="block",document.getElementById("search-input").focus()};"auto"===CONFIG.localsearch.trigger?l.addEventListener("input",h):(document.querySelector(".search-icon").addEventListener("click",h),l.addEventListener("keypress",e=>{13===e.keyCode&&h()})),document.querySelector(".popup-trigger").addEventListener("click",e=>{e.stopPropagation(),!1===t?(document.querySelector(".search-pop-overlay").style.display="",document.querySelector(".search-pop-overlay").innerHTML='<div class="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div>',u(p)):p()});const d=()=>{document.body.style.overflow="",document.querySelector(".search-pop-overlay").style.display="none",document.querySelector(".popup").style.display="none"};document.querySelector(".search-pop-overlay").addEventListener("click",d),document.querySelector(".popup-btn-close").addEventListener("click",d),window.addEventListener("pjax:success",d),window.addEventListener("keyup",e=>{27===e.which&&d()})});